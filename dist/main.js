(()=>{const e=document.getElementById("tasks"),t=document.getElementById("taskForm"),n=Cookies.get("csrftoken"),a="https://todoapi.up.railway.app",o=`${a}/api/tasks/`;t.addEventListener("submit",(e=>{e.preventDefault();const t={name:e.target[0].value},a={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":n}};(async()=>{const e=await fetch(o,a),t=await e.json();console.log(t)})()})),async function(){const t=await fetch(o),s=await t.json();0===s.length?e.innerHTML="<h2>No tasks</h2>":(s.forEach((t=>{const o=document.createElement("li");o.classList.add("list-group-item","rounded","d-flex","justify-content-between"),e.appendChild(o),o.innerHTML=`\n            <span>${t.name}</span>\n            <div class="d-flex justify-content-around">\n              <input id="taskStatus" type="checkbox" ${t.completed?'checked=""':null}/>\n              <i id="editTask" class="fa-solid fa-pen-to-square px-2"></i>\n              <i id="deleteTask" class="fa-solid fa-trash"></i>\n            </div>\n            `;const s=`${a}/api/tasks/${t.id}/`;!function(e,t,a){e.querySelector("#taskStatus").addEventListener("change",(()=>{(async()=>{const e={method:"PATCH",body:JSON.stringify({completed:!1===t.completed}),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":n}},o=await fetch(a,e);await o.json(),console.log("updated")})()}))}(o,t,s),function(e,t,a){e.querySelector("#editTask").addEventListener("click",(()=>{let e=prompt("Update Task",t.name);null!=e&&(async e=>{const t={method:"PUT",body:JSON.stringify({name:e}),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":n}},o=await fetch(a,t),s=await o.json();console.log(s.name)})(e)}))}(o,t,s),function(e,t){e.querySelector("#deleteTask").addEventListener("click",(()=>{const e={method:"DELETE",headers:{"X-CSRFToken":n}};confirm("Are you sure you want to delete this task?")&&(async()=>{const n=await fetch(t,e);await n.json()})()}))}(o,s)})),console.log(s))}()})();